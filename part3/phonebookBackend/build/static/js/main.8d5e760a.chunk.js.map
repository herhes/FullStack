{"version":3,"sources":["components/Filter.js","services/phonebookService.js","components/Persons.js","components/PersonForm.js","components/Notification.js","AppPhoneBook.js","index.js"],"names":["Filter","filter","setFilter","persons","setFilteredList","value","onChange","event","preventDefault","target","filteredNames","map","person","name","toLowerCase","includes","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Persons","filteredList","setPersons","key","number","onClick","window","confirm","console","log","phonebookService","list","p","list2","catch","error","handleClick","PersonForm","newName","newNumber","setNewName","setNewNumber","setErrorMessage","errorMessage","onSubmit","personUpdate","returnedPerson","concat","setTimeout","type","Notification","message","className","AppPhoneBook","useState","useEffect","initialPersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8d5e760a.chunk.js","sourcesContent":["import React from 'react'\r\nconst Filter =({filter, setFilter, persons, setFilteredList}) => {\r\n\r\n    const handleFilter = (event) => {\r\n        event.preventDefault()\r\n        setFilter(event.target.value)\r\n        const names = persons.map(person => person.name)\r\n       const filteredNames = names.filter(name => name.toLowerCase().includes((event.target.value).toLowerCase()))\r\n       setFilteredList(persons.filter(person => filteredNames.includes(person.name)))\r\n   \r\n   \r\n    }\r\n\r\n    return (\r\n\r\n    <div>\r\n           filter shown with <input value={filter}  onChange={handleFilter}/>\r\n      </div>\r\n\r\n    )\r\n}\r\n\r\nexport default Filter","\r\nimport axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst del = id => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response)\r\n  }\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, del }","import React from 'react'\r\nimport phonebookService from '../services/phonebookService'\r\n\r\n\r\n\r\nconst Persons = ({ filteredList, persons, setPersons, setFilteredList }) => {\r\n\r\n    const handleClick = person => {\r\n\r\n        if (window.confirm(`Delete ${person.name}`)) {\r\n\r\n            console.log(person)\r\n\r\n            phonebookService\r\n                .del(person.id)\r\n                .then(response => {\r\n\r\n                    const list = persons.filter(p => p.id !== person.id)\r\n                    setPersons(list)\r\n                    const list2 = filteredList.filter(p => p.id !== person.id)\r\n                    setFilteredList(list2)\r\n\r\n                })\r\n                .catch(error => {\r\n                    console.log('failed')\r\n                })\r\n        }\r\n    }\r\n    return (\r\n        <ul>\r\n            {filteredList.map(person => {\r\n                return (\r\n                    <>\r\n                        <li key={person.name}>{person.name} {person.number} <button onClick={() => handleClick(person)} >delete</button></li>\r\n                    </>\r\n                )\r\n            }\r\n\r\n            )}\r\n        </ul>\r\n\r\n\r\n    )\r\n}\r\n\r\nexport default Persons\r\n","import React from 'react'\r\nimport phonebookService from '../services/phonebookService'\r\nconst PersonForm =({persons, setPersons, filteredList, setFilteredList, newName, newNumber, setNewName, setNewNumber, filter, errorMessage, setErrorMessage}) => {\r\n\r\n    const addPerson = (event) => {\r\n        event.preventDefault()\r\n  \r\n        const names = persons.map(person => person.name)\r\n  \r\n        if (!names.includes(newName)) {\r\n   \r\n         const personObject = {\r\n          name : newName, \r\n          number: newNumber\r\n        }\r\n\r\n        phonebookService\r\n        .create(personObject)\r\n        .then(returnedPerson=> {\r\n\r\n          setPersons(persons.concat(returnedPerson))\r\n          if (newName.toLowerCase().includes(filter.toLowerCase())) {\r\n            setFilteredList(filteredList.concat(returnedPerson)) }\r\n        })\r\n        .catch(error =>{\r\n         console.log(error.response.data)\r\n          //setErrorMessage(\"aloooo\")\r\n\r\n            setErrorMessage(error.response.data)\r\n\r\n            setTimeout(() => {\r\n              setErrorMessage(null)\r\n            }, 5000)\r\n       \r\n         // window.alert(\"Name should be at least 3 characters, and number should be at least 8\")\r\n         // console.log(error.response.data)\r\n        })\r\n\r\n\r\n  \r\n        //setPersons(persons.concat(personObject))\r\n        setNewName('')\r\n        setNewNumber('')\r\n        \r\n  \r\n      } else {\r\n          //window.alert(`${newName} is already added to the phonebook`);\r\n          if (window.confirm(`${newName} is already added to the  phonebook, replace the old number with a new one`)) {\r\n\r\n            const person = persons.filter(p => p.name === newName)\r\n           \r\n            const personUpdate = {\r\n              name : newName,\r\n              number: newNumber\r\n            }\r\n\r\n            phonebookService\r\n            .update(person[0].id, personUpdate)\r\n            .then(returnedPerson =>{\r\n              setPersons(persons.map(person => person.name !== newName ? person : returnedPerson ))\r\n\r\n              setFilteredList(filteredList.map(person => person.name !==newName ? person : returnedPerson))\r\n            }\r\n              )\r\n              .catch(error => console.log(\"failed\"))\r\n\r\n\r\n\r\n          }\r\n  \r\n      }\r\n  \r\n    }\r\n  \r\n    const addName = (event) => {  \r\n      setNewName(event.target.value)\r\n    }\r\n  \r\n    const addNumber = (event) => {  \r\n      setNewNumber(event.target.value)\r\n    }\r\n\r\n    return (\r\n\r\n        <form onSubmit={addPerson}>\r\n      \r\n        <div>\r\n           name: <input onChange={addName}  value={newName}/>\r\n        </div>\r\n        <div>\r\n           number: <input onChange={addNumber} value={newNumber}/> \r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n\r\n\r\n    )\r\n }\r\n export default PersonForm","import React from 'react'\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className=\"error\">\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\r\nimport Filter from './components/Filter'\r\nimport Persons from './components/Persons'\r\nimport PersonForm from './components/PersonForm'\r\nimport phonebookService from './services/phonebookService'\r\nimport Notification from './components/Notification'\r\n\r\n\r\nconst AppPhoneBook = () => {\r\n    const [persons, setPersons] = useState([])\r\n    \r\nconst hook = () => {\r\n    console.log('effect')\r\n    phonebookService\r\n     .getAll()\r\n     .then(initialPersons => {\r\n            console.log('promise fulfilled')\r\n            setPersons(initialPersons)\r\n            setFilteredList(initialPersons)\r\n          })\r\n} \r\nuseEffect(hook, []) \r\n\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ filter, setFilter] = useState('')\r\n  const [ filteredList, setFilteredList ] = useState([])\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n\r\n  \r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={errorMessage}/>\r\n      <Filter filter={filter} setFilter={setFilter} persons={persons} setFilteredList={setFilteredList}/>\r\n      <h2>add a new</h2>\r\n      <PersonForm persons={persons} setPersons={setPersons} newName={newName} setNewName={setNewName} \r\n      newNumber={newNumber} setNewNumber={setNewNumber} filteredList={filteredList} setFilteredList={setFilteredList} filter={filter} setErrorMessage={setErrorMessage}/>\r\n      <h2>Numbers</h2>\r\n      <Persons persons={persons} filteredList={filteredList} setPersons={setPersons} setFilteredList={setFilteredList} />\r\n    </div>\r\n  )\r\n}\r\nexport default AppPhoneBook","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport AppPhoneBook from './AppPhoneBook.js'\nimport './index.css'\n\nReactDOM.render(\n  <AppPhoneBook />,\n  document.getElementById('root')\n)"],"sourceRoot":""}